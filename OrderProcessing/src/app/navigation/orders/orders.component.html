<div class="title-container">
  <div class="sort-filter-container">
    <span class="bold">Order Management</span>
    <mat-select class="sortby" placeholder="Sort By" (selectionChange)="orderStatusSelectionChange($event);"
      [(ngModel)]="selectedStatus">
      <ng-container *ngFor="let stat of orderStatuses">
        <mat-option [value]="stat.statusCode">{{stat.statusName}}</mat-option>
      </ng-container>
    </mat-select>
  </div>
</div>

<div>
  <mat-progress-bar mode="indeterminate" *ngIf="isFetched===undefined"></mat-progress-bar>
  <div>
    <table mat-table [dataSource]="mainDataSource" class="mat-elevation-z2 order-table">
      <ng-container matColumnDef="serial">
        <th mat-header-cell *matHeaderCellDef>
          <b>S.No.</b>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          {{i+1+pageConfig.page*pageConfig.pageSize}}
        </td>
      </ng-container>
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>
          <b>Order ID</b>
        </th>
        <td mat-cell *matCellDef="let element;">
          {{element.id}}
        </td>
      </ng-container>
      <ng-container matColumnDef="customer">
        <th mat-header-cell *matHeaderCellDef>
          <b>Customer</b>
        </th>
        <td mat-cell *matCellDef="let element;">
          {{element.customer}}
        </td>
      </ng-container>
      <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef>
          <b>Date</b>
        </th>
        <td mat-cell *matCellDef="let element;">
          {{element.createdAt | date}}
        </td>
      </ng-container>
      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef>
          <b>Amount</b>
        </th>
        <td mat-cell *matCellDef="let element;">
          {{element.amount}}
        </td>
      </ng-container>
      <ng-container matColumnDef="paymentMode">
        <th mat-header-cell *matHeaderCellDef>
          <b>Payment Mode</b>
        </th>
        <td mat-cell *matCellDef="let element;">
          <span
          [ngClass]="{'blue-badge':element.paymentMode==='Online', 'green-badge':element.paymentMode === 'COD'}">
          {{element.paymentMode}}
        </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="paymentStatus">
        <th mat-header-cell *matHeaderCellDef>
          <b>Payment Status</b>
        </th>
        <td mat-cell *matCellDef="let element;">
          {{element.paymentStatus}}
        </td>
      </ng-container>
      <ng-container matColumnDef="orderStatus">
        <th mat-header-cell *matHeaderCellDef>
          <b>Order Status</b>
        </th>
        <td mat-cell *matCellDef="let element;">
          {{element.orderStatus}}
        </td>
      </ng-container>
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>
          <b>Action</b>
        </th>
        <td mat-cell *matCellDef="let element;">
          <button mat-icon-button routerLink="order-detail/{{element.id}}">
            <img src="../../../assets/eye.svg" alt="View">
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
    </table>
    <app-no-data-found [dataMissingMessage]="'No orders found'" *ngIf="remappedStatusSpecificOrderList.length===0 && isFetched"></app-no-data-found>
    <app-no-data-found [dataMissingMessage]="'Failed to load resources'" *ngIf="isFetched===false"></app-no-data-found>
    <mat-paginator [length]="totalOrdersWithRespectiveStatus" [pageSize]="pageConfig.pageSize" (page)="handlePageEvent($event)" #paginator></mat-paginator>
  </div>
</div>